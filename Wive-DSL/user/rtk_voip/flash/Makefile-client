include ../.linux_config

#CC = mips-linux-gcc
#AR = mips-linux-ar
OBJS = voip_flash_client.o
LIBS = libvoip_flash_client.a

CFLAGS = -g -Wall -I../includes -I../ui/include -I../../goahead-2.1.1/LINUX
LDFLAGS = --static

ifneq ($(BUILD_DIALPLAN), 0)
CFLAGS += -DCONFIG_RTK_VOIP_DIALPLAN
endif

DEPENDENCY	= $(OBJS:.o=.d)

all: $(LIBS) 

$(LIBS): $(OBJS)
	$(AR) rcs $@ $<

%.o: %.c
	$(CC) -c -o $@ $(CFLAGS) $<
	$(CC) -M $(CFLAGS) $< | sed -e "s#^$(*F).o[ :]*#$(@D)\/$(*F).o : #" > $(@:.o=.d)

clean:
	rm -f $(LIBS) $(OBJS) *.d

-include $(DEPENDENCY)
